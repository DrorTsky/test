{"ast":null,"code":"import _regeneratorRuntime from\"/home/dror/WebProjects/test/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/dror/WebProjects/test/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/home/dror/WebProjects/test/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/dror/WebProjects/test/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/home/dror/WebProjects/test/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/dror/WebProjects/test/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import'./App.css';import web3 from'./web3';import lottery from'./lottery';var App=/*#__PURE__*/function(_Component){_inherits(App,_Component);var _super=_createSuper(App);function App(){var _this;_classCallCheck(this,App);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={manager:'',players:[],balance:'',value:'',message:''};_this.onSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(event){var accounts;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:event.preventDefault();_context.next=3;return web3.eth.getAccounts();case 3:accounts=_context.sent;_this.setState({message:'Waiting on transaction success...'});_context.next=7;return lottery.methods.enter().send({from:accounts[0],value:web3.utils.toWei(_this.state.value,'ether')});case 7:_this.setState({message:'you have been entered!'});case 8:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}();_this.onClick=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var accounts;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return web3.eth.getAccounts();case 2:accounts=_context2.sent;_this.setState({message:'Waiting on transaction success...'});_context2.next=6;return lottery.methods.pickWinner().send({from:accounts[0]});case 6:_this.setState({message:'A winner has been picked!'});case 7:case\"end\":return _context2.stop();}}},_callee2);}));return _this;}_createClass(App,[{key:\"componentDidMount\",value:function(){var _componentDidMount=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){var manager,players,balance,ethereum;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return lottery.methods.manager().call();case 2:manager=_context3.sent;_context3.next=5;return lottery.methods.getPlayers().call();case 5:players=_context3.sent;_context3.next=8;return web3.eth.getBalance(lottery.options.address);case 8:balance=_context3.sent;ethereum=window.ethereum;if(!(typeof ethereum!=='undefined')){_context3.next=13;break;}_context3.next=13;return ethereum.enable();case 13:this.setState({manager:manager,players:players,balance:balance});case 14:case\"end\":return _context3.stop();}}},_callee3,this);}));function componentDidMount(){return _componentDidMount.apply(this,arguments);}return componentDidMount;}()},{key:\"render\",value:function render(){var _this2=this;return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"h2\",null,\"Lottery Contract\"),/*#__PURE__*/React.createElement(\"p\",null,\"This contract is managed by \",this.state.manager,\". There are currently \",this.state.players.length,\" people entered, competing to win \",web3.utils.fromWei(this.state.balance,'ether'),\" ether.\"),/*#__PURE__*/React.createElement(\"hr\",null),/*#__PURE__*/React.createElement(\"form\",{onSubmit:this.onSubmit},/*#__PURE__*/React.createElement(\"h4\",null,\"Want to try your luck?\"),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"label\",null,\"Amount of ether to enter\"),/*#__PURE__*/React.createElement(\"input\",{value:this.state.value,onChange:function onChange(event){return _this2.setState({value:event.target.value});}})),/*#__PURE__*/React.createElement(\"button\",null,\"Enter\")),/*#__PURE__*/React.createElement(\"hr\",null),/*#__PURE__*/React.createElement(\"h4\",null,\"Ready to pick a winner?\"),/*#__PURE__*/React.createElement(\"button\",{onClick:this.onClick},\"Pick a winner!\"),/*#__PURE__*/React.createElement(\"hr\",null),/*#__PURE__*/React.createElement(\"h1\",null,this.state.message));}}]);return App;}(Component);export default App;","map":{"version":3,"sources":["/home/dror/WebProjects/test/src/App.js"],"names":["React","Component","web3","lottery","App","state","manager","players","balance","value","message","onSubmit","event","preventDefault","eth","getAccounts","accounts","setState","methods","enter","send","from","utils","toWei","onClick","pickWinner","call","getPlayers","getBalance","options","address","ethereum","window","enable","length","fromWei","target"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport './App.css';\nimport web3 from './web3';\nimport lottery from './lottery';\n\nclass App extends Component {\n  state = {\n    manager: '',\n    players: [],\n    balance: '',\n    value: '',\n    message: ''\n  };\n\n  async componentDidMount(){\n    const manager = await lottery.methods.manager().call();\n    const players = await lottery.methods.getPlayers().call();\n    const balance = await web3.eth.getBalance(lottery.options.address);\n\n    let ethereum = window.ethereum;\n    if (typeof ethereum !== 'undefined') {\n      await ethereum.enable();\n    }\n\n    this.setState({ manager, players, balance });\n  }\n\n  onSubmit = async (event) => {\n    event.preventDefault();\n\n    const accounts = await web3.eth.getAccounts();\n\n    this.setState({ message: 'Waiting on transaction success...' });\n\n    await lottery.methods.enter().send({\n      from: accounts[0],\n      value: web3.utils.toWei(this.state.value, 'ether')\n    });\n\n    this.setState({ message: 'you have been entered!'});\n\n  };\n\n  onClick = async () => {\n    const accounts = await web3.eth.getAccounts();\n\n    this.setState({ message: 'Waiting on transaction success...' });\n\n    await lottery.methods.pickWinner().send({\n      from: accounts[0]\n    });\n\n    this.setState({ message: 'A winner has been picked!' });\n\n  };\n\n  render() {\n  return (\n    <div>\n      <h2>Lottery Contract</h2>\n      <p>\n        This contract is managed by {this.state.manager}.\n        There are currently {this.state.players.length} people entered, competing to win {web3.utils.fromWei(this.state.balance, 'ether')} ether.\n      </p>\n\n      <hr />\n\n      <form onSubmit={this.onSubmit}>\n        <h4>Want to try your luck?</h4>\n\n        <div>\n          <label>Amount of ether to enter</label>\n          <input\n           value={this.state.value}\n           onChange={event => this.setState({ value: event.target.value })}\n          />\n        </div>\n        <button>Enter</button>\n      </form>\n      <hr />\n\n      <h4>Ready to pick a winner?</h4>\n      <button onClick={this.onClick}>Pick a winner!</button>\n\n      <hr />\n      <h1>{this.state.message}</h1>\n    </div>\n    );\n  };\n}\n\nexport default App;"]},"metadata":{},"sourceType":"module"}